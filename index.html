<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Calculadora de Inter√©s Compuesto | Simulador de Inversi√≥n</title>
  <meta name="description" content="Simula tus inversiones a largo plazo con esta calculadora de inter√©s compuesto. Compara diferentes escenarios con aportaciones variables y visualiza tus ganancias." />
  <meta name="keywords" content="inter√©s compuesto, simulador de inversi√≥n, calculadora financiera, ahorro, bolsa, finanzas personales" />

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7492465327672473" crossorigin="anonymous"></script>

  <style>
    :root {
      --bg: #0b0c10;
      --bg-2: #0f1117;
      --card: #11161d;
      --muted: #9aa4af;
      --text: #f3f5f7;
      --primary: #66fcf1;
      --primary-2: #45a29e;
      --ring: rgba(102, 252, 241, 0.4);
      --border: #1f2833;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.35), inset 0 1px 0 rgba(255,255,255,0.03);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      margin: 0;
      color: var(--text);
      background:
        radial-gradient(1000px 500px at 10% -10%, rgba(102,252,241,0.08), transparent 60%),
        radial-gradient(800px 400px at 110% 20%, rgba(69,162,158,0.08), transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg-2));
    }

    h1 {
      text-align: center; margin: 28px 0 10px; font-weight: 800; color: var(--primary);
      font-size: clamp(2rem, 4vw, 3rem); letter-spacing: .5px;
      text-shadow: 0 2px 12px rgba(102,252,241,.15);
    }

    h3 { margin: 20px 0 12px; color: var(--primary); text-align:center; font-size: clamp(1.25rem, 2.4vw, 2rem); font-weight: 700; }
    p.intro { text-align: center; max-width: 800px; margin: 0 auto 26px; font-size: 1rem; line-height: 1.7; color: var(--muted); padding: 0 16px; }

    nav { text-align:center; margin: 10px 0 24px; }
    nav a {
      display: inline-block;
      color: var(--primary);
      background: rgba(102,252,241,0.08);
      border: 1px solid rgba(102,252,241,0.25);
      padding: 8px 14px; margin: 0 8px;
      border-radius: 999px; text-decoration: none; font-weight: 600;
      transition: transform .15s ease, background .2s ease, box-shadow .2s ease;
      box-shadow: var(--shadow);
    }
    nav a:hover { background: rgba(102,252,241,0.16); transform: translateY(-1px); box-shadow: 0 8px 24px rgba(102,252,241,.15); }

    .container { max-width: 1100px; margin: 0 auto; padding: 10px 20px 40px; }

    .cluster { display:flex; gap: 16px; flex-wrap: wrap; justify-content: center; align-items: end; }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)), var(--card);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 16px;
      box-shadow: var(--shadow);
    }

    label { display:block; margin-bottom: 6px; font-weight: 700; color: #7fd8d4; font-size: .95rem; }
    .field { display: grid; gap: 8px; text-align: left; min-width: 220px; }

    input, select, button {
      font: inherit;
    }

    input, select {
      width: 100%; padding: 12px 12px; border-radius: 12px; border: 1px solid var(--border);
      background: #121923; color: var(--text); text-align: center;
      transition: box-shadow .2s ease, border-color .2s ease, transform .05s ease;
    }
    input:hover, select:hover { border-color: #28404e; }
    input:focus, select:focus {
      outline: none; border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--ring);
      transform: translateY(-1px);
    }

    .global-config { text-align:center; margin-bottom: 24px; }
    .global-config .field { align-items: center; }

    .escenario { margin: 20px 0 28px; padding: 0 0 18px; border-bottom: 1px dashed var(--border); }

    .bloque-aporte { display:flex; gap: 12px; margin-top: 8px; align-items: center; justify-content: center; }
    .bloque-aporte span { min-width: 88px; text-align: right; color: var(--muted); font-weight: 600; }
    .bloque-aporte input { width: 140px; }

    .actions { text-align: center; margin-top: 12px; }
    button.btn-primary {
      margin-top: 10px; padding: 14px 22px; background: var(--primary-2); color: #0b0c10;
      border: 1px solid rgba(102,252,241,0.25); border-radius: 12px; cursor: pointer; font-weight: 800; font-size: 1.05rem;
      letter-spacing: .2px; box-shadow: 0 10px 24px rgba(69,162,158,.25);
      transition: transform .12s ease, box-shadow .2s ease, background .2s ease;
    }
    button.btn-primary:hover { background: var(--primary); transform: translateY(-1px); box-shadow: 0 14px 28px rgba(102,252,241,.25); }
    button.btn-pill { padding: 8px 12px; border-radius: 999px; background: #18222d; color: var(--text); border: 1px solid var(--border); font-weight: 700; }
    button.btn-pill:hover { border-color: var(--primary); }

    /* Gr√°fico */
    #grafico { width: 100%; max-width: 1000px; height: 420px; margin-top: 28px; background: #0b0c10; border-radius: 14px; border: 1px solid var(--border); box-shadow: var(--shadow); }

    .chart-wrap { position: relative; text-align: center; margin-top: 28px; }
    #fullscreenBtn { position: absolute; top: 10px; right: 10px; }

    .resultados { margin-top: 22px; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00)), var(--card); padding: 18px; border-radius: 16px; border: 1px solid var(--border); box-shadow: var(--shadow); }
    .resultados p { margin: 6px 0; }

    .adsense { margin: 28px auto; text-align: center; min-height: 90px; filter: saturate(.85); }

    /* Overlay fullscreen */
    #graficoOverlay { display: none; position: fixed; inset: 0; width: 100vw; height: 100vh; background: rgba(1,3,8,0.92); z-index: 9999; justify-content: center; align-items: center; flex-direction: column; backdrop-filter: blur(2px); }
    #graficoOverlay canvas { width: 95vw; height: 80vh; max-height: 90vh; background: #0b0c10; border-radius: 14px; border: 1px solid var(--border); box-shadow: var(--shadow); transition: height .25s ease; }

    #cerrarOverlay { margin-top: 14px; padding: 10px 14px; background: var(--primary-2); color: #0b0c10; border: 1px solid rgba(102,252,241,0.25); border-radius: 12px; font-weight: 800; cursor: pointer; }
    #cerrarOverlay:hover { background: var(--primary); }

    /* Responsive */
    @media (max-width: 720px) {
      .bloque-aporte { gap: 8px; }
      .bloque-aporte span { min-width: 72px; }
      #grafico { height: 360px; }
    }

    @media (prefers-reduced-motion: reduce) {
      * { transition: none !important; }
    }
  </style>
</head>
<body>
  <h1>Calculadora de Inter√©s Compuesto</h1>
  <p class="intro">
    Esta herramienta permite simular el crecimiento de una inversi√≥n a largo plazo utilizando el inter√©s compuesto.
    Podr√°s definir varios escenarios con diferentes activos, capital inicial y aportaciones peri√≥dicas variables por bloques de 5 a√±os.
    La calculadora generar√° un gr√°fico comparativo y mostrar√° la inversi√≥n final y las ganancias netas para cada escenario.
  </p>

  <nav>
    <a href="que-es-interes-compuesto.html">Qu√© es el inter√©s compuesto</a>
    <a href="estrategias-inversion.html">Estrategias de inversi√≥n</a>
  </nav>

  <div class="container">
    <div class="global-config cluster card">
      <div class="field">
        <label for="numEscenarios">N√∫mero de escenarios</label>
        <input type="number" id="numEscenarios" value="1" min="1" max="3" onchange="generarEscenarios()" />
      </div>
      <div class="field">
        <label for="aleatorioGlobal">Nivel de aleatoriedad (1-10)</label>
        <input type="number" id="aleatorioGlobal" value="5" min="1" max="10" />
      </div>
    </div>

    <div id="escenarios" class="card"></div>
    <div class="actions"><button class="btn-primary" onclick="calcular()">Calcular</button></div>

    <div class="chart-wrap">
      <button id="fullscreenBtn" class="btn-pill">üîç Ampliar</button>
      <div id="graficoContainer">
        <canvas id="grafico"></canvas>
      </div>
    </div>

    <div class="resultados" id="resultados"></div>
  </div>

  <div id="graficoOverlay">
    <canvas id="graficoFull"></canvas>
    <button id="cerrarOverlay">‚ùå Cerrar</button>
  </div>

  <div class="adsense">
    <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7492465327672473" data-ad-slot="2717366869" data-ad-format="auto" data-full-width-responsive="true"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // === Datos de activos (sin cambios funcionales) ===
    const activos = {
      "Airbus": [0.112, 0.14],
      "Alphabet (Google)": [0.22, 0.1024],
      "Amazon": [0.27, 0.16],
      "Apple": [0.298, 0.1024],
      "Aston Martin": [-0.4321, 0.25],
      "Bitcoin": [1.761, 2.25],
      "Cacao": [0.0961, 0.0628],
      "Ferrari": [0.273, 0.0144],
      "IBEX 35": [0.07, 0.04],
      "Johnson & Johnson": [0.09, 0.03],
      "Mercedes-Benz": [0.021, 0.0225],
      "Microsoft": [0.174, 0.0625],
      "NVIDIA": [0.472, 0.3025],
      "Oro": [0.102, 0.0361],
      "Petr√≥leo (WTI)": [0.12, 0.25],
      "S&P 500": [0.09, 0.0324],
      "Tesla": [0.3379, 0.25],
      "TSMC": [0.1895, 0.10],
      "Volkswagen": [-0.0368, 0.01]
    };

    let chart;
    let chartFull;

    // === Generaci√≥n de escenarios (mismo flujo; se corrigen solo plantillas de texto para que el HTML sea v√°lido) ===
    function generarEscenarios() {
      const n = parseInt(document.getElementById("numEscenarios").value);
      const contenedor = document.getElementById("escenarios");
      contenedor.innerHTML = "";
      for (let i = 1; i <= n; i++) {
        const esc = document.createElement("div");
        esc.className = "escenario";
        esc.innerHTML = `
          <h3>Escenario ${i}</h3>
          <div class="cluster">
            <div class="field">
              <label>A√±os de inversi√≥n</label>
              <input type="number" id="anios_${i}" value="20" min="1" max="50">
            </div>
            <div class="field">
              <label>Capital inicial (‚Ç¨)</label>
              <input type="number" id="capital_${i}" value="1000">
            </div>
            <div class="field">
              <label>Activo</label>
              <select id="activo_${i}">
                ${Object.keys(activos).map(a => `<option value="${a}">${a}</option>`).join('')}
              </select>
            </div>
          </div>
          <div id="bloques_${i}"></div>
        `;
        contenedor.appendChild(esc);

        generarBloques(i, 20);
        document.getElementById(`anios_${i}`).addEventListener("change", (e)=>generarBloques(i, e.target.value));
      }
    }

    function generarBloques(idEscenario, anios) {
      const bloques = Math.ceil(anios/5);
      const div = document.getElementById(`bloques_${idEscenario}`);
      div.innerHTML = `<label style="text-align:center; display:block; margin-top:15px;">Aportaci√≥n mensual por periodos de 5 a√±os</label>`;
      for (let b=1;b<=bloques;b++){
        const inicio = (b-1)*5+1;
        const fin = Math.min(b*5,anios);
        div.innerHTML += `
          <div class="bloque-aporte">
            <span>${inicio}-${fin}:</span>
            <input type="number" id="aporte_${idEscenario}_${b}" value="100">
          </div>`;
      }
    }

    function calcular() {
      const n = parseInt(document.getElementById("numEscenarios").value);
      const aleatorioGlobal = parseFloat(document.getElementById("aleatorioGlobal").value);
      const seed = Math.floor(Math.random()*1000000); // Semilla global (visible en resultados)

      const ctx = document.getElementById("grafico").getContext("2d");
      const ctxFull = document.getElementById("graficoFull").getContext("2d");
      if(chart) chart.destroy();
      if(chartFull) chartFull.destroy();

      const datasets = [];
      const resultadosDiv = document.getElementById("resultados");
      resultadosDiv.innerHTML = `<p style="color:var(--muted)">Semilla aleatoria utilizada: <b>${seed}</b></p>`;

      for (let i = 1; i <= n; i++) {
        // Reiniciamos el generador de aleatoriedad para cada escenario (misma secuencia entre escenarios)
        let randomGen = mulberry32(seed);

        const anios = parseInt(document.getElementById(`anios_${i}`).value);
        const capital = parseFloat(document.getElementById(`capital_${i}`).value);
        const activo = document.getElementById(`activo_${i}`).value;
        const [rentabilidad,varianza] = activos[activo];
        const meses = anios*12;

        // Vector de aportaciones anuales
        let aportesAnuales = [];
        const bloques = Math.ceil(anios/5);
        for (let b = 1; b <= bloques; b++) {
          const val = parseFloat(document.getElementById(`aporte_${i}_${b}`).value);
          const inicio = (b-1)*5 + 1;
          const fin = Math.min(b*5, anios);
          for(let y=inicio; y<=fin; y++) aportesAnuales.push(val);
        }

        // Simulaci√≥n
        let saldo = capital;
        let historial = [saldo];
        let deposito = [capital];

        for (let m=1; m <= meses; m++) {
          const muMensual = rentabilidad / 12;
          const sigmaMensual = Math.sqrt(varianza) / Math.sqrt(12) * (aleatorioGlobal / 5);
          const rnd = randomGen() * 2 - 1;
          const rendimiento = muMensual + sigmaMensual * rnd;
          const anioActual = Math.floor((m-1)/12);
          saldo = saldo * (1 + rendimiento) + aportesAnuales[anioActual];
          historial.push(saldo);
          deposito.push(deposito[deposito.length-1] + aportesAnuales[anioActual]);
        }

        // Colores est√©ticos (HSL aleatorio) ‚Äî visual √∫nicamente
        const color = `hsl(${Math.random()*360},70%,60%)`;

        datasets.push({ label: `Escenario ${i} (${activo})`, data: historial, borderColor: color, fill: false, tension: 0.22, pointRadius: 0 });
        datasets.push({ label: `Dep√≥sito Escenario ${i}` , data: deposito , borderColor: color, fill: false, borderDash: [5,5], pointRadius: 0, tension: 0.22 });

        resultadosDiv.innerHTML += `
          <p>
            <b>Escenario ${i} (${activo})</b> ‚Üí
            Final: ‚Ç¨${saldo.toFixed(2)} |
            Invertido: ‚Ç¨${deposito[deposito.length-1].toFixed(2)} |
            <span style="color:${color}; font-weight:800;">Ganancia: ‚Ç¨${(saldo - deposito[deposito.length-1]).toFixed(2)}</span>
          </p>`;
      }

      // === Gr√°fico principal: cambios est√©ticos en Chart.js ===
      const canvas = document.getElementById("grafico");
      canvas.style.width = "100%";
      canvas.style.height = "420px";
      canvas.width = canvas.offsetWidth;
      canvas.height = 420;

      const commonOptions = {
        responsive: false,
        maintainAspectRatio: false,
        animation: { duration: 600, easing: 'easeOutQuart' },
        plugins: {
          legend: { position: 'bottom', labels: { color: '#e8eef3', padding: 16, usePointStyle: true, pointStyle: 'line' } },
          tooltip: {
            backgroundColor: 'rgba(3,7,18,0.9)',
            titleColor: '#cfe8e6',
            bodyColor: '#e8eef3',
            borderColor: '#1f2833',
            borderWidth: 1,
            displayColors: false,
            padding: 12
          }
        },
        scales: {
          x: {
            title: { display: true, text: 'Mes', color: '#d7e3ea', font: { weight: 700 } },
            ticks: { color: '#c7d2da' },
            grid: { color: 'rgba(203,213,225,0.08)' }
          },
          y: {
            title: { display: true, text: '‚Ç¨', color: '#d7e3ea', font: { weight: 700 } },
            ticks: { color: '#c7d2da' },
            grid: { color: 'rgba(203,213,225,0.08)' }
          }
        }
      };

      chart = new Chart(ctx, {
        type: 'line',
        data: { labels: Array.from({length: Math.max(...datasets.map(d=>d.data.length))}, (_,i)=>i), datasets },
        options: commonOptions
      });

      // Overlay responsive
      chartFull = new Chart(ctxFull, {
        type: 'line',
        data: chart.data,
        options: { ...commonOptions, responsive: true }
      });
    }

    function mulberry32(a) {
      return function() {
        var t = a += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
      }
    }

    // Inicializaci√≥n UI
    generarEscenarios();

    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const graficoOverlay = document.getElementById("graficoOverlay");
    const cerrarOverlay = document.getElementById("cerrarOverlay");

    fullscreenBtn.addEventListener("click", () => {
      graficoOverlay.style.display = "flex";
      const canvasFull = document.querySelector("#graficoOverlay canvas");
      if (window.innerWidth < 768) { canvasFull.style.height = "80vh"; } else { canvasFull.style.height = "80vh"; }
      if(chartFull){ chartFull.options.maintainAspectRatio = false; chartFull.resize(); }
    });

    cerrarOverlay.addEventListener("click", () => { graficoOverlay.style.display = "none"; });
  </script>
</body>
</html>



